/**
 * MAIN NAVIGATION
 *
 * Main navigation along the top, including the megamenu
 */

.dropdownNav{
    display: none;
}

// Fix the height or it jumps around alot as the JS resizes it.  Do it now in CSS to avoid jumping when the js loads. The overflow is removed by the JS or the menus won't show
.js .main-nav {
    height: 54px;
    overflow: hidden;
}

.main-nav {
    .clearfix;
    background-color: @heritage-blue;
    // Chrome messes up the spacing without this
    //margin-bottom: 1em;
}

html[lang="en-SCT"] .main-nav {
    background-color: @heritage-blue;
}


.nav-list-primary {
    .limit-width(@max-page-width); // Old width
    list-style: none;
    // 12px makes the first items label inline with the page edge
    padding: 0 20px 0 12px;
}

.top-item {
    float: left;
    margin: 0;
    /* For the mega menus */
    position: relative;

    & > a {
        padding: 15px unit(@box-spacing-horizontal/2*@base-size,px);
        display: block;
        font-weight: @font-weight-bold;
        color: @white;
        border: none;

        &:hover, &:focus {
            background: @heritage-blue-lightest;
            color: @heritage-blue;
            text-decoration: none;
        }
    }

    /* No external link icons */
    .a-external:after {
        content: none;
    }
}

.nav-list-primary-more {
    float: right;
    margin: 0;
    padding: 6px 0;
    position: relative; /* So we can position the more menu within this */
    & > a {
        padding: 8px 8px;
        display: inline-block;
        font-weight: @font-weight-bold;
        background: #003A6A;
        color: @white;
        text-decoration: none;
        line-height: 25px;
        border: none;
        & > i {
            margin-left: 10px;
        }
    }

    &:hover, &.active {
        //background-color: #003A6A;

        & > a {
            background-color: #003A6A;
        }

        & > .main-nav__more-links {
            display: block;
        }
    }
}

.main-nav__more-links {
    position: absolute;
    list-style: none;
    background-color: #003A6A;
    z-index: 200;
    right: 0;
    top: 100%;
    padding: .4em;
    margin: 0;
    display: none;

    & > li {
        margin: 0;
        padding: 0;

        & > a {
            display: block;
            color: @white;
            padding: .4em;
            font-weight: @font-weight-bold;
            white-space: nowrap;
            border: none;

            &:hover, &:focus {
                background: @white;
                color: #01355a;
                text-decoration: none;
            }
        }
    }
}

@media ( min-width: @screen-sm-min) {
    .main-nav__mobile-secondary {
        // This is generated by JavaScript
        display: none !important;
    }
}


/*Mega Menus*/

.mega-menu {
    position: absolute;
    background: @white;
    top: 100%;
    border-top: 6px solid @blue-navigation;
    -moz-box-shadow: 0 0 10px @gray-2;
    -webkit-box-shadow: 0 0 10px @gray-2;
    box-shadow: 0 0 10px @gray-2;
    padding: .5em;
    z-index: 999;
    display: none;
    margin-top: 1em;
    width: 300px; /* One column - two column is set below */

    a {
        border-bottom: 0;
    }

    ul {
        /*.arrow-list;*/
        list-style: none;
        margin-left: 0;
        padding-left: 0;
    }

    .view-all {
        .view-all;

        a {
            font-weight: bold;
        }
    }

    &--show-right {
        width: 600px; /* Width for two columns */
    }

    &__left,
    &__right {
        display: table-cell;
        vertical-align: top;
        padding: .5em;
        width: 100%;
    }

    &__right {
        width: 50%;
    }

    &__title {
        margin: .3em 0;
    }

    &__promo {
        background: @heritage-blue-lightest;
        color: @heritage-blue;
        padding: .5em;
        overflow: hidden; /* Clearfix */

        img {
            float: left;
            margin: 0 .5em .5em 0;
            max-width: 27%; /* Yuk, but that is what they have asked for */
        }

        a, a:hover {
            color: @heritage-blue;
            font-weight: bold;
        }
    }

    &__arrow {
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-bottom: 10px solid @blue-navigation;
        position: absolute;
        /* We actually position this in JS as Chrome and Firefox cannot agree how position
         inside a display: table element with borders
         The following works correctly in Chrome and IE
        */
        top: 0;
        /* Create a slight overlap to hide any gap while zooming */
        margin-top: -9px;
        /* Firefox is created jagged arrows.  This fixes it*/
        -moz-transform: scale(.9999);
    }

    &--show-right > &__left {
        /* If we are not showing the right side it needs to take the full width */
        width: 50%;
    }

    &__left + &__right {
        padding-left: 1em;
    }
}


// Mobile view

@media (max-width: @screen-xs-max){
    .js .main-nav{
        height: auto;
    }

    .main-nav {
        display: none;
        position: absolute;
        width: 100%;
        z-index: 100;
        .clearfix;
    }

    .nav-list-primary, .main-nav__mobile-secondary {
        list-style: none;
        display: block;
        margin:0;
        padding: .5em;
        float: left;
        width: 50%;
    }

    .top-item {
        float: none;
        padding: 0;
        & > a {
            padding: .5em;
        }
    }

    .mega-menu,
    .nav-list-primary-more {
        display: none!important;
    }
}

.active > .mega-menu {
    display: table;
}

.mega-menu--hide-left {
    width: 300px;
    .mega-menu__right {
        width: 100%;
    }
}