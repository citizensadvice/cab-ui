/**
 * SHARE BAR
 *
 * Current sharing sidebar, social icons.
 */

/* User agent check needed, are we doing this on a server level or page level? */
.a-social-whatsapp {
    display: visible;
}

html[data-useragent*='Mobi'] .a-social-whatsapp {
    display: inline-block;
}


/* Previous styling for sharing options */

.main-container {
    // Used to wrap 
    position: relative;
}

// Fixes an issue with spacing when the section notice is present
// SHAME Daniel
.section-notice + .main-content .share-bar__outer {
    margin-top: unit(@box-spacing*@base-size,px);
    margin-top: @box-spacing;
}

// This nasty selector is to get this to work in the beta sections
// SHAME Daniel
.main-container.main-container {

    .share-bar__outer {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;

        @media (max-width: @screen-xs-max) {
            position: static;
        }
    }

    .share-bar {
        position: -webkit-sticky;
        position: sticky;
        top: 1em;
        z-index: 1;
        background: @gray-7;
        font-size: @font-size-large;

        @media (max-height: 500px) {
            // It's an edge case, but you can't see all the options if we don't do this
            top: auto;
            bottom: 1em;
        }

        @media (max-width: @screen-xs-max) {
            position: static;
            background: none;
        }
    }

    .share-bar {
        @media (max-width: @screen-xs-max) {
            .spacing(margin,@box-spacing,0);
        }
    }

    .share-bar > a {
        // This goes against the normal rules of always using a class selector
        // But it avoids doubling up on the classes
        display: block;
        color: @gray-3;
        .spacing(padding,@box-spacing-horizontal*.8);
        line-height: 1;
        position: relative;
        text-decoration: none;
        border-bottom: none;

        @media (max-width: @screen-xs-max) {
            display: inline-block;
            color: @white;
            .spacing(padding,@box-spacing-horizontal*.6,@box-spacing-horizontal);
            text-align: center;
            margin-bottom: .3em;
            width: 3em;
        }

        &:after {
            content: none;
        }

        & > i:before {
            // Reset right padding on icon
            padding: 0;
        }

        & > span {
            display: inline-block;
            clip: rect(0 0 0 0);
            margin-left: -1px;
            position: absolute;
            width: 1px;
            line-height: 2.2*1.4em;
            text-align: center;
            font-size: 1/1.4em;
            white-space: nowrap;
            overflow: hidden;
        }

        &:hover, &:focus {
            color: @white;
            text-decoration: none;

            span {
                background: @gray-0;
                clip: auto;
                margin-left: -15em;
                width: 15em;
                top: 0;
                bottom: 0;
                left: 0;

                @media (max-width: @screen-xs-max) {
                    clip: rect(0 0 0 0);
                    width: 1px;
                    margin-left: -1px;
                }
            }
        }

        &.share-bar__link--closed:focus span {
            // Close the share bar link while it is still in focus
            clip: rect(0 0 0 0);
            width: 1px;
            margin-left: -1px;
        }

        &.share-bar__link--closed:hover span {
            // But still allow the link to be expanded when hovering
            clip: auto;
            width: 15em;
            margin-left: -15em;
        }
    }

    .share-bar__link--twitter {
        &:hover, &:focus {
            background: @twitter-brand-colour;
        }

        @media (max-width: @screen-xs-max) {
            background: @twitter-brand-colour;

            &:hover {
                background: darken(@twitter-brand-colour,10%);
            }
        }
    }

    .share-bar__link--facebook {
        &:hover, &:focus {
            background: @facebook-brand-colour; // Facebook colour
        }

        @media (max-width: @screen-xs-max) {
            background: @facebook-brand-colour; 

            &:hover {
                background: darken(@facebook-brand-colour,10%);
            }
        }
    }

    .share-bar__link--google {
        &:hover, &:focus {
            background: @google-plus-brand-colour;
        }

        @media (max-width: @screen-xs-max) {
            background: @google-plus-brand-colour;

            &:hover {
                background: darken(@google-plus-brand-colour,10%);
            }
        }
    }

    .share-bar__link--email {
        &:hover, &:focus {
            background: @heritage-blue-light;
        }

        @media (max-width: @screen-xs-max) {
            background: @heritage-blue-light;

            &:hover {
                background: darken(@heritage-blue-light,10%);
            }
        }
    }

    .share-bar__link--print {
        &:hover, &:focus {
            background: @purple;
        }

        @media (max-width: @screen-xs-max) {
            background: @purple;

            &:hover {
                background: darken(@purple,10%);
            }
        }
    }

    .share-bar__link--feedback,
    .share-bar__link--bmis {
        &:hover, &:focus {
            background: @green;
        }

        @media (max-width: @screen-xs-max) {
            background: @green;

            &:hover {
                background: darken(@green,10%);
            }
        }
    }

    .share-bar__link--email-alerts {
        &:hover, &:focus {
            background: @orange;
        }

        @media (max-width: @screen-xs-max) {
            background: @orange;

            &:hover {
                background: darken(@orange,10%);
            }
        }
    }

    .share-bar__link--references {
        &:hover, &:focus {
            background: @heritage-blue;
        }

        @media (max-width: @screen-xs-max) {
            background: @heritage-blue;

            &:hover {
                background: darken(@heritage-blue,10%);
            }
        }
    }

    .share-bar__link--word {
        &:hover, &:focus {
            background: @green;
        }

        @media (max-width: @screen-xs-max) {
            background: @green;

            &:hover {
                background: darken(@green,10%);
            }
        }
    }

    .share-list, .share-list-mobile {
        list-style: none;
        margin-left: 0;
    }

    .share-list {
        li {
            margin-bottom: 0;

            a, a:visited {
                font-size: @font-size-large;
                text-align: center;
                width: 50px;
                display: block;
                padding: 10px 0;
                color: @gray-3;
            }

                a:hover, a:focus {
                    color: @white;
                    text-decoration: none;
                    opacity: 1;
                }
        }
    }
}